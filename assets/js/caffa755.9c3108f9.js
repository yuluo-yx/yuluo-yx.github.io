"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[3805],{78621:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>u,default:()=>d,frontMatter:()=>r,metadata:()=>l,toc:()=>i});var l=t(88434),a=t(25105),s=t(89999);const r={slug:"element-plus-upload-debug",title:"Element-plus Upload Debug \u8bb0\u5f55",date:new Date("2024-09-20T22:34:07.000Z"),authors:"yuluo",tags:["Element-plus"],keywords:["Element-plus","upload","Debug"]},u=void 0,o={authorsImageUrls:[void 0]},i=[{value:"\u80cc\u666f",id:"\u80cc\u666f",level:2},{value:"\u95ee\u9898\u539f\u56e0",id:"\u95ee\u9898\u539f\u56e0",level:2},{value:"\u8e29\u5751",id:"\u8e29\u5751",level:2},{value:"no multipart boundary was found",id:"no-multipart-boundary-was-found",level:3},{value:"the request was rejected because no multipart boundary was found",id:"the-request-was-rejected-because-no-multipart-boundary-was-found",level:3},{value:"Required part &#39;file&#39; is not present.",id:"required-part-file-is-not-present",level:3},{value:"\u5b8c\u6574\u4ee3\u7801\u793a\u4f8b",id:"\u5b8c\u6574\u4ee3\u7801\u793a\u4f8b",level:2}];function p(e){const n={code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"\u80cc\u666f",children:"\u80cc\u666f"}),"\n",(0,a.jsx)(n.p,{children:"\u5728 Vue3 \u4e2d\u4f7f\u7528 Element-plus \u7684\u6587\u4ef6\u4e0a\u4f20\u7ec4\u4ef6 el-upload \u7ec4\u4ef6\u4e0a\u4f20\u81f3 Spring Boot \u540e\u53f0\u670d\u52a1\u7aef\u5931\u8d25\uff0c\u4f46 Postman \u6210\u529f\uff01"}),"\n",(0,a.jsx)(n.h2,{id:"\u95ee\u9898\u539f\u56e0",children:"\u95ee\u9898\u539f\u56e0"}),"\n",(0,a.jsx)(n.p,{children:"Element-plus \u4e2d\u5bf9\u4e0a\u4f20\u7684\u6587\u4ef6\u7c7b\u578b\u53c8\u505a\u4e86\u4e00\u6b21\u5c01\u88c5\uff0c\u5bfc\u81f4\u548c\u540e\u53f0\u5bf9\u5e94\u7684\u6587\u4ef6\u63a5\u53d7\u5931\u8d25\uff0c\u51fa\u73b0\u5404\u79cd\u5404\u6837\u7684\u9519\u8bef\uff1a"}),"\n",(0,a.jsx)(n.p,{children:"Element-plus \u6587\u4ef6\u4e0a\u4f20\u5bf9\u8c61\u5b9a\u4e49\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"export interface UploadFile {\n    name: string;\n    percentage?: number;\n    status: UploadStatus;\n    size?: number;\n    response?: unknown;\n    uid: number;\n    url?: string;\n    raw?: UploadRawFile;\n}\n\nexport interface UploadRawFile extends File {\n    uid: number;\n}\n"})}),"\n",(0,a.jsx)(n.p,{children:"spring boot \u540e\u53f0\u63a5\u53e3"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'    @PostMapping("/avatar")\n    public Result<String> uploadAvatar(@RequestParam MultipartFile file) {\n\n        return Result.success(uploadService.uploadAvatar(file));\n    }\n'})}),"\n",(0,a.jsx)(n.h2,{id:"\u8e29\u5751",children:"\u8e29\u5751"}),"\n",(0,a.jsx)(n.h3,{id:"no-multipart-boundary-was-found",children:"no multipart boundary was found"}),"\n",(0,a.jsx)(n.p,{children:"\u6ca1\u6709\u6b63\u786e\u8bbe\u7f6e header \u4e2d Content-typ\uff0c\u5728 postman \u4e2d\uff0c\u4f7f\u7528 form-data \u5f62\u5f0f\u4e0a\u4f20\u6587\u4ef6\uff0c\u4f1a\u81ea\u5df1\u8bbe\u7f6e content-type\u3002\u5728 axios \u4e2d\uff0c\u9700\u8981\u624b\u52a8\u8bbe\u7f6e"}),"\n",(0,a.jsx)(n.h3,{id:"the-request-was-rejected-because-no-multipart-boundary-was-found",children:"the request was rejected because no multipart boundary was found"}),"\n",(0,a.jsx)(n.p,{children:"\u4e0a\u4f20 formdata \u7c7b\u578b\u7684\u53d8\u91cf\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"const form = new FormData()\nform.append('file', file)\n"})}),"\n",(0,a.jsx)(n.h3,{id:"required-part-file-is-not-present",children:"Required part 'file' is not present."}),"\n",(0,a.jsx)(n.p,{children:"\u6ce8\u610f\u4e0a\u4f20\u6587\u4ef6\u65f6\uff0c\u4f7f\u7528 Element-plus UploadFile \u5c5e\u6027\u4e2d\u7684 raw \u5c5e\u6027\u503c\u4e0a\u4f20\uff0c\u4e0d\u7136\u5c31\u4f1a\u51fa\u73b0\u6b64\u9519\u8bef\uff01"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"// \u9519\u8bef\u4ee3\u7801\nconst uploadFile = async (file: File) => {\n    await FileAPI.uploadAvatar(file).then((res) => {\n        log(res)\n    })\n}\n\n// \u6b63\u786e\u4ee3\u7801\nconst uploadFile = async (file: UploadFile) => {\n    await FileAPI.uploadAvatar(file.raw).then((res) => {\n        log(res)\n    })\n}\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u5b8c\u6574\u4ee3\u7801\u793a\u4f8b",children:"\u5b8c\u6574\u4ee3\u7801\u793a\u4f8b"}),"\n",(0,a.jsx)(n.p,{children:"axios \u63a5\u53e3\u5c01\u88c5"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"upload: async (\n    url: string,\n    file: File,\n    config?: AxiosRequestConfig\n): Promise<Result<string>> => {\n    const form = new FormData()\n    form.append('file', file)\n    return axiosInstance.post(\n        url,\n        form,\n        {\n            headers: {\n                'Content-Type': 'multipart/form-data',\n                ...(config?.headers || {}),\n            },\n            ...config,\n        });\n},\n"})}),"\n",(0,a.jsx)(n.p,{children:"vue \u6587\u4ef6\u4e2d\u4ee3\u7801"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-vue",children:'// template\n<el-upload class="avatar-uploader"\n           action="/" :show-file-list="false" :auto-upload="false" \n           :on-change="uploadFile" accept=".jpg, .jpeg, .png">\n    <el-avatar :size="75" :src="userAvatar" />\n</el-upload>\n\n// script\nconst uploadFile = async (file: UploadFile) => {\n    await FileAPI.uploadAvatar(file.raw).then((res) => {\n        log(res)\n    })\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:"spring boot\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@PostMapping("/avatar")\npublic Result<String> uploadAvatar(@RequestParam MultipartFile file) {\n\n    // \u5c06\u6240\u6709\u7684 HttpServletRequest \u53c2\u6570\u6253\u5370\u51fa\u6765\uff0c\u4ee5 debug \u53c2\u6570\u533a\u522b\n    // System.out.println(file);\n    // request.getParameterMap().forEach((k, v) -> System.out.println(k + " " + Arrays.toString(v)));\n    // return Result.success("success");\n\n    return Result.success(uploadService.uploadAvatar(file));\n}\n'})})]})}function d(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(p,{...e})}):p(e)}},89999:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>u});var l=t(58101);const a={},s=l.createContext(a);function r(e){const n=l.useContext(s);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function u(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),l.createElement(s.Provider,{value:n},e.children)}},88434:e=>{e.exports=JSON.parse('{"permalink":"/blog/element-plus-upload-debug","editUrl":"https://github.com/yuluo-yx/blog/edit/master/blog/Bug-summary/Element-plus-Upload-Debug-\u8bb0\u5f55.md","source":"@site/blog/Bug-summary/Element-plus-Upload-Debug-\u8bb0\u5f55.md","title":"Element-plus Upload Debug \u8bb0\u5f55","description":"\u80cc\u666f","date":"2024-09-20T22:34:07.000Z","tags":[{"inline":true,"label":"Element-plus","permalink":"/blog/tags/element-plus"}],"readingTime":1.4266666666666667,"hasTruncateMarker":true,"authors":[{"name":"\u7267\u751f","title":"Java & go developer","url":"https://github.com/yuluo-yx","email":"yuluo08290126@gmail.com","socials":{"x":"https://x.com/yuluo","github":"https://github.com/yuluo-yx"},"imageURL":"https://kuizuo.cn/img/logo.png","key":"yuluo","page":null}],"frontMatter":{"slug":"element-plus-upload-debug","title":"Element-plus Upload Debug \u8bb0\u5f55","date":"2024-09-20T22:34:07.000Z","authors":"yuluo","tags":["Element-plus"],"keywords":["Element-plus","upload","Debug"]},"unlisted":false,"prevItem":{"title":"\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u767b\u5f55\u548c\u83b7\u53d6\u4fe1\u606f\u529f\u80fd\u8bb0\u5f55","permalink":"/blog/wechatminiapp-login-get-use-info"},"nextItem":{"title":"Vue3 + Vite \u6574\u5408 LuckySheet \u5b8c\u6210 Excel \u6587\u4ef6\u7684\u9884\u89c8\u548c\u7f16\u8f91","permalink":"/blog/vue3-vite-merge-lucky-sheet-preview-excel-edit"}}')}}]);