"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[3527],{20606:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>a,contentTitle:()=>l,default:()=>g,frontMatter:()=>s,metadata:()=>t,toc:()=>c});var t=r(79219),o=r(25105),i=r(89999);const s={slug:"go-style",title:"go style",date:new Date("2025-09-07T22:11:49.000Z"),authors:"yuluo",tags:["golang"],keywords:["golang"]},l=void 0,a={authorsImageUrls:[void 0]},c=[{value:"Golang \u4ee3\u7801 \u7f16\u7a0b\u89c4\u8303",id:"golang-\u4ee3\u7801-\u7f16\u7a0b\u89c4\u8303",level:2},{value:"1. gofmt \u7edf\u4e00\u4ee3\u7801\u683c\u5f0f",id:"1-gofmt-\u7edf\u4e00\u4ee3\u7801\u683c\u5f0f",level:4},{value:"2. \u6ce8\u91ca\u8bf4\u660e\u589e\u5f3a",id:"2-\u6ce8\u91ca\u8bf4\u660e\u589e\u5f3a",level:4},{value:"3. \u6ce8\u91ca\u5e94\u8be5\u8bf4\u660e\u7684\u662f\u201d\u4e3a\u4ec0\u4e48\u201c\uff0c\u800c\u4e0d\u662f\u201d\u505a\u4ec0\u4e48\u201c",id:"3-\u6ce8\u91ca\u5e94\u8be5\u8bf4\u660e\u7684\u662f\u4e3a\u4ec0\u4e48\u800c\u4e0d\u662f\u505a\u4ec0\u4e48",level:4},{value:"4. \u5f53\u6709 context.Context \u53c2\u6570\u65f6\uff0c\u5176\u6c38\u8fdc\u662f\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u5e76\u4e14\u4e0d\u88ab\u653e\u5728\u7ed3\u6784\u4f53\u4e2d",id:"4-\u5f53\u6709-contextcontext-\u53c2\u6570\u65f6\u5176\u6c38\u8fdc\u662f\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u5e76\u4e14\u4e0d\u88ab\u653e\u5728\u7ed3\u6784\u4f53\u4e2d",level:4},{value:"5. \u6b63\u786e\u58f0\u660e\u53d8\u91cf",id:"5-\u6b63\u786e\u58f0\u660e\u53d8\u91cf",level:4},{value:"6. \u4ee3\u7801\u4e2d\u4e0d\u8981\u51fa\u73b0 panic",id:"6-\u4ee3\u7801\u4e2d\u4e0d\u8981\u51fa\u73b0-panic",level:4},{value:"7. \u4fdd\u6301\u9519\u8bef\u4fe1\u606f\u5e72\u51c0\uff0c\u4f7f\u7528\u7ed3\u6784\u5316\u65e5\u5fd7",id:"7-\u4fdd\u6301\u9519\u8bef\u4fe1\u606f\u5e72\u51c0\u4f7f\u7528\u7ed3\u6784\u5316\u65e5\u5fd7",level:4},{value:"8. \u907f\u514d\u591a\u4f59\u7684 else \u903b\u8f91",id:"8-\u907f\u514d\u591a\u4f59\u7684-else-\u903b\u8f91",level:4},{value:"9. \u4f7f\u7528\u5305\u522b\u540d\u5bfc\u5165",id:"9-\u4f7f\u7528\u5305\u522b\u540d\u5bfc\u5165",level:4},{value:"10. \u7f29\u5199\u4fdd\u6301\u5927\u5199\u548c\u5b98\u65b9\u5e93\u4e00\u81f4",id:"10-\u7f29\u5199\u4fdd\u6301\u5927\u5199\u548c\u5b98\u65b9\u5e93\u4e00\u81f4",level:4},{value:"11. \u907f\u514d\u88f8\u8fd4\u56de",id:"11-\u907f\u514d\u88f8\u8fd4\u56de",level:4},{value:"12. \u5305\u540d\u3001\u63a5\u53d7\u8005\u540d\u4fdd\u6301\u7b80\u5355\u4e0e\u7b80\u6d01\u5207\u907f\u514d\u51fd\u6570\u540d\u91cd\u590d\u4e0e\u5570\u55e6",id:"12-\u5305\u540d\u63a5\u53d7\u8005\u540d\u4fdd\u6301\u7b80\u5355\u4e0e\u7b80\u6d01\u5207\u907f\u514d\u51fd\u6570\u540d\u91cd\u590d\u4e0e\u5570\u55e6",level:4},{value:"13. \u51fd\u6570\u540d\u4e2d\u4e0d\u5e94\u51fa\u73b0\u8fd4\u56de\u7c7b\u578b\u4e14\u547d\u540d\u4f53\u73b0\u8bed\u4e49",id:"13-\u51fd\u6570\u540d\u4e2d\u4e0d\u5e94\u51fa\u73b0\u8fd4\u56de\u7c7b\u578b\u4e14\u547d\u540d\u4f53\u73b0\u8bed\u4e49",level:4},{value:"14. \u6d4b\u8bd5\u5199\u6cd5\u7b26\u5408 Go <code>got %v, want %v</code>\u98ce\u683c",id:"14-\u6d4b\u8bd5\u5199\u6cd5\u7b26\u5408-go-got-v-want-v\u98ce\u683c",level:4},{value:"15. \u5e38\u91cf\u4e0e\u7ed3\u6784\u5316\u9519\u8bef\u58f0\u660e",id:"15-\u5e38\u91cf\u4e0e\u7ed3\u6784\u5316\u9519\u8bef\u58f0\u660e",level:4},{value:"16. \u5f53\u51fd\u6570\u53c2\u6570\u5217\u8868\u8fc7\u591a\u65f6\uff0c\u4f7f\u7528\u53ef\u53d8\u53c2\u6570\u5904\u7406\u8f93\u5165",id:"16-\u5f53\u51fd\u6570\u53c2\u6570\u5217\u8868\u8fc7\u591a\u65f6\u4f7f\u7528\u53ef\u53d8\u53c2\u6570\u5904\u7406\u8f93\u5165",level:4},{value:"17. \u5b57\u7b26\u4e32\u62fc\u63a5",id:"17-\u5b57\u7b26\u4e32\u62fc\u63a5",level:4}];function d(n){const e={a:"a",code:"code",h2:"h2",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.p,{children:"\u4e2a\u4eba\u6574\u7406\u7684\u4e00\u4e9b\u4e1c\u897f style\uff0c\u4f5c\u4e3a\u53c2\u8003\u3002"}),"\n",(0,o.jsx)(e.h2,{id:"golang-\u4ee3\u7801-\u7f16\u7a0b\u89c4\u8303",children:"Golang \u4ee3\u7801 \u7f16\u7a0b\u89c4\u8303"}),"\n",(0,o.jsx)(e.p,{children:"Go \u4ee3\u7801\u5e94\u8be5\u4ee5\u6700\u7b80\u5355\u7684\u65b9\u5f0f\u7f16\u5199\uff0c\u4ee5\u5b9e\u73b0\u5176\u76ee\u6807\uff0c\u65e0\u8bba\u662f\u5728\u884c\u4e3a\u8fd8\u662f\u6027\u80fd\u65b9\u9762\u3002\u5728 Google Go \u4ee3\u7801\u5e93\u4e2d\uff0c\u7b80\u5355\u4ee3\u7801\uff1a"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"\u4ece\u4e0a\u5230\u4e0b\u90fd\u6613\u4e8e\u9605\u8bfb\uff1b"}),"\n",(0,o.jsx)(e.li,{children:"\u4e0d\u5047\u8bbe\u4f60\u5df2\u7ecf\u77e5\u9053\u5b83\u5728\u505a\u4ec0\u4e48\uff1b"}),"\n",(0,o.jsx)(e.li,{children:"\u4e0d\u5047\u8bbe\u4f60\u53ef\u4ee5\u8bb0\u4f4f\u6240\u6709\u524d\u9762\u7684\u4ee3\u7801\uff1b"}),"\n",(0,o.jsx)(e.li,{children:"\u6ca1\u6709\u4e0d\u5fc5\u8981\u7684\u62bd\u8c61\u5c42\u6b21\uff1b"}),"\n",(0,o.jsx)(e.li,{children:"\u6ca1\u6709\u80fd\u5f15\u8d77\u5173\u6ce8\u7684\u4e16\u4fd7\u540d\u79f0\uff1b"}),"\n",(0,o.jsx)(e.li,{children:"\u8ba9\u5f00\u53d1\u8005\u6e05\u695a\u5730\u4e86\u89e3\u4ef7\u503c\u89c2\u548c\u51b3\u7b56\u7684\u4f20\u64ad\uff1b"}),"\n",(0,o.jsx)(e.li,{children:"\u6709\u6ce8\u91ca\u89e3\u91ca\u4ee3\u7801\u4e3a\u4ec0\u4e48\u8fd9\u6837\u505a\uff0c\u800c\u4e0d\u662f\u505a\u4ec0\u4e48\uff0c\u4ee5\u907f\u514d\u5c06\u6765\u51fa\u73b0\u504f\u5dee\uff1b"}),"\n",(0,o.jsx)(e.li,{children:"\u6709\u72ec\u7acb\u7684\u6587\u6863\uff1b"}),"\n",(0,o.jsx)(e.li,{children:"\u6709 \u6709\u7528\u7684\u9519\u8bef\u548c\u6709\u7528\u7684\u5931\u8d25\u6d4b\u8bd5\uff1b"}),"\n",(0,o.jsx)(e.li,{children:"\u53ef\u80fd\u7ecf\u5e38\u4e0e\u201c\u806a\u660e\u201d\u7684\u4ee3\u7801\u4e92\u76f8\u6392\u65a5\u3002"}),"\n"]}),"\n",(0,o.jsx)(e.p,{children:"\u53c2\u8003\u6307\u5357\uff1a"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:(0,o.jsx)(e.a,{href:"https://google.github.io/styleguide/go/best-practices",children:"https://google.github.io/styleguide/go/best-practices"})})}),"\n"]}),"\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:(0,o.jsx)(e.a,{href:"https://go.dev/wiki/CodeReviewComments",children:"https://go.dev/wiki/CodeReviewComments"})})}),"\n"]}),"\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.a,{href:"https://google.github.io/styleguide/go/",children:"https://google.github.io/styleguide/go/"})}),"\n"]}),"\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.a,{href:"https://go.dev/doc/effective_go",children:"https://go.dev/doc/effective_go"})}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(e.h4,{id:"1-gofmt-\u7edf\u4e00\u4ee3\u7801\u683c\u5f0f",children:"1. gofmt \u7edf\u4e00\u4ee3\u7801\u683c\u5f0f"}),"\n",(0,o.jsxs)(e.p,{children:["\u6267\u884c ",(0,o.jsx)(e.code,{children:"go fmt ./... "}),"\u6765\u7edf\u4e00\u4ee3\u7801\u683c\u5f0f\u3002"]}),"\n",(0,o.jsx)(e.h4,{id:"2-\u6ce8\u91ca\u8bf4\u660e\u589e\u5f3a",children:"2. \u6ce8\u91ca\u8bf4\u660e\u589e\u5f3a"}),"\n",(0,o.jsx)(e.p,{children:"\u5728\u4f1a\u5f15\u53d1\u6b67\u4e49\u6216\u8005\u548c\u4e0a\u6587\u5224\u65ad\u4e0d\u540c\u65f6\u4f7f\u7528\u6ce8\u91ca\u4ee5\u63d0\u9192\u5f00\u53d1\u8005\u3002"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-golang",children:"if err := doSomething(); err != nil {\n    // ...\n}\n\nif err := doSomething(); err == nil { // if NO error\n    // ...\n}\n"})}),"\n",(0,o.jsx)(e.h4,{id:"3-\u6ce8\u91ca\u5e94\u8be5\u8bf4\u660e\u7684\u662f\u4e3a\u4ec0\u4e48\u800c\u4e0d\u662f\u505a\u4ec0\u4e48",children:"3. \u6ce8\u91ca\u5e94\u8be5\u8bf4\u660e\u7684\u662f\u201d\u4e3a\u4ec0\u4e48\u201c\uff0c\u800c\u4e0d\u662f\u201d\u505a\u4ec0\u4e48\u201c"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-go",children:"// \u274c Bad\n// Increment i by 1\ni = i +\xa01\n\n// \u2705 Good\n// Retry count is increased after each failed attempt.\ni++\n"})}),"\n",(0,o.jsx)(e.h4,{id:"4-\u5f53\u6709-contextcontext-\u53c2\u6570\u65f6\u5176\u6c38\u8fdc\u662f\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u5e76\u4e14\u4e0d\u88ab\u653e\u5728\u7ed3\u6784\u4f53\u4e2d",children:"4. \u5f53\u6709 context.Context \u53c2\u6570\u65f6\uff0c\u5176\u6c38\u8fdc\u662f\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u5e76\u4e14\u4e0d\u88ab\u653e\u5728\u7ed3\u6784\u4f53\u4e2d"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-golang",children:"// \u274c Bad\ntype ServerContext struct {\n  ctx context.Context\n  // other \n}\n\nfunc (s *ServerContext) doSomething(param any, ctx context.Context) {\n  // ...\n}\n\n// \u2705 Good\ntype ServerContext struct {\n  // other \n}\n\nfunc (s *ServerContext) doSomething(ctx context.Context, param any) {\n  // ...\n}\n"})}),"\n",(0,o.jsx)(e.h4,{id:"5-\u6b63\u786e\u58f0\u660e\u53d8\u91cf",children:"5. \u6b63\u786e\u58f0\u660e\u53d8\u91cf"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-golang",children:"// \u274c Bad\n// nil \ns := []int8{}\n\n// \u2705 Good\n// \u975e\u96f6\u4f46\u957f\u5ea6\u4e3a\u96f6\nvar s []int\n\ni := 42\n"})}),"\n",(0,o.jsxs)(e.p,{children:["[]T"," \u4f1a\u9ed8\u8ba4\u5206\u914d\u5185\u5b58\uff0cvar s []T \u66f4\u6e05\u6670\u4e0e\u9ad8\u6548\u3002"]}),"\n",(0,o.jsxs)(e.p,{children:["\u5728\u4f7f\u7528\u975e\u96f6\u503c\u521d\u59cb\u5316\u65f6\uff0c\u4f7f\u7528  ",(0,o.jsx)(e.code,{children:":="})," \u8d4b\u503c\u3002"]}),"\n",(0,o.jsx)(e.h4,{id:"6-\u4ee3\u7801\u4e2d\u4e0d\u8981\u51fa\u73b0-panic",children:"6. \u4ee3\u7801\u4e2d\u4e0d\u8981\u51fa\u73b0 panic"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-golang",children:'// \u274c Bad\nfunc ParseConfig(file *os.File, cfg any) {\n    decoder := yaml.NewDecoder(file)\n    if err := decoder.Decode(cfg); err != nil {\n        panic("failed to decode config: " + err.Error())\n    }\n}\n\n// \u2705 Good\nfunc Parse(file *os.File, cfg any) error {\n    decoder := yaml.NewDecoder(file)\n    if err := decoder.Decode(cfg); err != nil {\n        return err\n    }\n    return nil\n}\n'})}),"\n",(0,o.jsx)(e.p,{children:"\u4f9d\u8d56\u5e93\u5e94\u8be5\u4f18\u5148\u8fd4\u56de err\uff0c\u800c\u4e0d\u662f\u7ec8\u6b62\u7a0b\u5e8f\u3002"}),"\n",(0,o.jsx)(e.h4,{id:"7-\u4fdd\u6301\u9519\u8bef\u4fe1\u606f\u5e72\u51c0\u4f7f\u7528\u7ed3\u6784\u5316\u65e5\u5fd7",children:"7. \u4fdd\u6301\u9519\u8bef\u4fe1\u606f\u5e72\u51c0\uff0c\u4f7f\u7528\u7ed3\u6784\u5316\u65e5\u5fd7"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-golang",children:'// \u274c Bad\nreturn\xa0fmt.Errorf("some error.")\n\n// \u2705 Good\nreturn\xa0fmt.Errorf("some error.")\n'})}),"\n",(0,o.jsx)(e.p,{children:"error msg \u5c0f\u5199\u5f00\u5934\u4e14\u4e0d\u4ee5\u4efb\u4f55\u6807\u70b9\u7ed3\u5c3e\u3002"}),"\n",(0,o.jsx)(e.h4,{id:"8-\u907f\u514d\u591a\u4f59\u7684-else-\u903b\u8f91",children:"8. \u907f\u514d\u591a\u4f59\u7684 else \u903b\u8f91"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-golang",children:"// \u274c Bad\nif\xa0err !=\xa0nil\xa0{\n\xa0 \xa0\xa0if\xa0something {\n\xa0 \xa0 \xa0 \xa0\xa0return\xa0err\n\xa0 \xa0 }\n}\xa0else\xa0{\n\xa0 \xa0 doSomething()\n}\n\n// \u2705 Good\nif\xa0err !=\xa0nil\xa0{\n\xa0 \xa0\xa0return\xa0err\n}\ndoSomething()\n"})}),"\n",(0,o.jsx)(e.p,{children:"\u5c3d\u65e9\u8fd4\u56de error \u4e14\u907f\u514d\u591a\u4f59\u7684 else \u8bed\u53e5\u3002"}),"\n",(0,o.jsx)(e.h4,{id:"9-\u4f7f\u7528\u5305\u522b\u540d\u5bfc\u5165",children:"9. \u4f7f\u7528\u5305\u522b\u540d\u5bfc\u5165"}),"\n",(0,o.jsx)(e.p,{children:"\u9664\u975e\u4e3a\u4e86\u907f\u514d\u540d\u79f0\u51b2\u7a81\uff0c\u5426\u5219\u5e94\u907f\u514d\u91cd\u547d\u540d\u5bfc\u5165\uff1b\u597d\u7684\u5305\u540d\u79f0\u4e0d\u5e94\u8be5\u9700\u8981\u91cd\u547d\u540d\u3002\u5982\u679c\u53d1\u751f\u51b2\u7a81\uff0c\u4f18\u5148\u91cd\u547d\u540d\u672c\u5730\u6216\u9879\u76ee\u7279\u5b9a\u7684\u5bfc\u5165\u3002"}),"\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.code,{children:"import pkg"}),"  \u65f6\u6309\u7ec4\u7ec4\u7ec7\uff0c\u6bcf\u7ec4\u4e4b\u95f4\u4ee5\u7a7a\u884c\u5206\u9694\u3002\u6807\u51c6\u5e93\u5305\u59cb\u7ec8\u4f4d\u4e8e\u7b2c\u4e00\u7ec4\uff0c\u5176\u6b21\u662f\u7b2c\u4e09\u65b9\u5305\uff0c\u6700\u540e\u662f\u9879\u76ee\u5185\u90e8\u5305\u3002"]}),"\n",(0,o.jsx)(e.h4,{id:"10-\u7f29\u5199\u4fdd\u6301\u5927\u5199\u548c\u5b98\u65b9\u5e93\u4e00\u81f4",children:"10. \u7f29\u5199\u4fdd\u6301\u5927\u5199\u548c\u5b98\u65b9\u5e93\u4e00\u81f4"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-golang",children:"// \u274c Bad\ntype\xa0HttpServer\xa0struct{}\n\n// \u2705 Good\ntype\xa0HTTPServer\xa0struct{}\n"})}),"\n",(0,o.jsx)(e.p,{children:"\u6807\u51c6\u5e93\u5199\u6cd5\uff1aHTTP\u3001ID\u3001JSON\u3002\u4fdd\u6301\u4e00\u81f4\u6027."}),"\n",(0,o.jsx)(e.h4,{id:"11-\u907f\u514d\u88f8\u8fd4\u56de",children:"11. \u907f\u514d\u88f8\u8fd4\u56de"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-golang",children:"// \u274c Bad\nfunc\xa0sum(a, b\xa0int)\xa0(result\xa0int) {\n\xa0 \xa0 result = a + b\n\xa0 \xa0\xa0return\n}\n\n// \u2705 Good\nfunc\xa0sum(a, b\xa0int)\xa0int\xa0{\n\xa0 \xa0\xa0return\xa0a + b\n}\n"})}),"\n",(0,o.jsx)(e.p,{children:"\u9664\u975e\u51fd\u6570\u975e\u5e38\u77ed\uff0c\u4e00\u773c\u770b\u5230\u5e95\u65f6\u4f7f\u7528\u88f8\u8fd4\u56de\u3002"}),"\n",(0,o.jsx)(e.h4,{id:"12-\u5305\u540d\u63a5\u53d7\u8005\u540d\u4fdd\u6301\u7b80\u5355\u4e0e\u7b80\u6d01\u5207\u907f\u514d\u51fd\u6570\u540d\u91cd\u590d\u4e0e\u5570\u55e6",children:"12. \u5305\u540d\u3001\u63a5\u53d7\u8005\u540d\u4fdd\u6301\u7b80\u5355\u4e0e\u7b80\u6d01\u5207\u907f\u514d\u51fd\u6570\u540d\u91cd\u590d\u4e0e\u5570\u55e6"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-golang",children:"// \u274c Bad\npackage\xa0my_utils\n\nfunc\xa0(this *Server)\xa0Start() {}\n\npackage\xa0yamlconfig\nfunc\xa0ParseYAMLConfig(input\xa0string)\xa0(*Config,\xa0error)\n\nfunc\xa0OverrideFirstWithSecond(dest, source *Config)\xa0error\n\n// \u4e0d\u5e94\u4e66\u5199\u51fd\u6570\u7684\u8fd4\u56de\u53c2\u6570\u540d,\u8fd9\u4f1a\u5bfc\u81f4 goDoc \u6df7\u4e71\nfunc doSomething(a, b int) (sum int, err error) {\n  // logic\n}\n\n// \u2705 Good\npackage\xa0utils\n\nfunc\xa0(s *Server)\xa0Start() \n\npackage\xa0yamlconfig\nfunc\xa0Parse(input\xa0string)\xa0(*Config,\xa0error)\n\nfunc\xa0Override(dest, source *Config)\xa0error\n\nfunc doSomething(a, b int) (int,error) {\n  // logic\n}\n"})}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"\u5305\u540d\u5c0f\u5199\u3001\u7b80\u6d01\u3001\u65e0\u4e0b\u5212\u7ebf\uff1b"}),"\n",(0,o.jsxs)(e.li,{children:["\u63a5\u53d7\u8005\u53d8\u91cf ",(0,o.jsx)(e.code,{children:"s"}),", ",(0,o.jsx)(e.code,{children:"r"}),", ",(0,o.jsx)(e.code,{children:"c"})," \u8fd9\u79cd\u77ed\u53d8\u91cf\u5e38\u89c1\u4e14\u6e05\u6670\uff1b"]}),"\n",(0,o.jsx)(e.li,{children:"\u5305\u540d\u63d0\u4f9b\u4e0a\u4e0b\u6587\u3002"}),"\n"]}),"\n",(0,o.jsx)(e.p,{children:"\u5f53\u9700\u8981\u6d88\u9664\u7c7b\u4f3c\u540d\u79f0\u7684\u51fd\u6570\u6b67\u4e49\u65f6\uff0c\u53ef\u4ee5\u5305\u542b\u989d\u5916\u7684\u4fe1\u606f\u3002"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-golang",children:"// \u2705 Good\nfunc (c *Config) WriteTextTo(w io.Writer) (int64, error)\nfunc (c *Config) WriteBinaryTo(w io.Writer) (int64, error)\n"})}),"\n",(0,o.jsx)(e.h4,{id:"13-\u51fd\u6570\u540d\u4e2d\u4e0d\u5e94\u51fa\u73b0\u8fd4\u56de\u7c7b\u578b\u4e14\u547d\u540d\u4f53\u73b0\u8bed\u4e49",children:"13. \u51fd\u6570\u540d\u4e2d\u4e0d\u5e94\u51fa\u73b0\u8fd4\u56de\u7c7b\u578b\u4e14\u547d\u540d\u4f53\u73b0\u8bed\u4e49"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-golang",children:"// \u274c Bad\nfunc\xa0TransformToJSON(input *Config)\xa0*jsonconfig.Config\n\nfunc\xa0(c *Config)\xa0GetJobName(key\xa0string) (value\xa0string, ok\xa0bool)\n\n// \u2705 Good\nfunc\xa0Transform(input *Config)\xa0*jsonconfig.Config\n\n// \u8fd4\u56de\u503c\u51fd\u6570\u4e2d\u4e0d\u8981\u52a8\u8bcd\nfunc\xa0(c *Config)\xa0JobName(key\xa0string) (value\xa0string, ok\xa0bool)\n\n// \u52a8\u4f5c\u7528\u52a8\u8bcd\uff0c\u53d6\u503c\u7528\u540d\u8bcd\nfunc\xa0(c *Config)\xa0ApplyChanges()\xa0error\nfunc\xa0ProcessData(data []byte)\xa0error\n"})}),"\n",(0,o.jsx)(e.p,{children:"\u52a8\u4f5c\u7528\u52a8\u8bcd\uff0c\u53d6\u503c\u7528\u540d\u8bcd\u4e14\u8fd4\u56de\u503c\u51fd\u6570\u4e2d\u4e0d\u8981\u52a8\u8bcd\u3002"}),"\n",(0,o.jsxs)(e.h4,{id:"14-\u6d4b\u8bd5\u5199\u6cd5\u7b26\u5408-go-got-v-want-v\u98ce\u683c",children:["14. \u6d4b\u8bd5\u5199\u6cd5\u7b26\u5408 Go ",(0,o.jsx)(e.code,{children:"got %v, want %v"}),"\u98ce\u683c"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-golang",children:'// \u274c Bad\nif\xa0got != want {\n\xa0 \xa0 t.Errorf("expected %v but got %v", want, got)\n}\n\n// \u2705 Good\nif\xa0got != want {\n\xa0 \xa0 t.Errorf("got %v, want %v", got, want)\n}\n'})}),"\n",(0,o.jsx)(e.h4,{id:"15-\u5e38\u91cf\u4e0e\u7ed3\u6784\u5316\u9519\u8bef\u58f0\u660e",children:"15. \u5e38\u91cf\u4e0e\u7ed3\u6784\u5316\u9519\u8bef\u58f0\u660e"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-golang",children:'type Animal string\n\nvar (\n    // ErrDuplicate occurs if this animal has already been seen.\n    ErrDuplicate = errors.New("duplicate")\n\n    // ErrMarsupial occurs because we\'re allergic to marsupials outside Australia.\n    // Sorry.\n    ErrMarsupial = errors.New("marsupials are not supported")\n)\n\nfunc process(animal Animal) error {\n    switch {\n    case seen[animal]:\n        return ErrDuplicate\n    case marsupial(animal):\n        return ErrMarsupial\n    }\n    seen[animal] = true\n    // ...\n    return nil\n}\n'})}),"\n",(0,o.jsx)(e.p,{children:"\u5728\u4f7f\u7528\u5230\u5e38\u91cf\u5b9a\u4e49\u6216\u8005\u9519\u8bef\u65f6\uff0c\u5c06\u5176\u673a\u6784\u5316\u5b9a\u4e49\u5728\u6587\u4ef6\u9876\u90e8\u6216\u7edf\u4e00\u7ba1\u7406\u3002"}),"\n",(0,o.jsx)(e.h4,{id:"16-\u5f53\u51fd\u6570\u53c2\u6570\u5217\u8868\u8fc7\u591a\u65f6\u4f7f\u7528\u53ef\u53d8\u53c2\u6570\u5904\u7406\u8f93\u5165",children:"16. \u5f53\u51fd\u6570\u53c2\u6570\u5217\u8868\u8fc7\u591a\u65f6\uff0c\u4f7f\u7528\u53ef\u53d8\u53c2\u6570\u5904\u7406\u8f93\u5165"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-golang",children:"type SshProtocol struct {\n\tHost                 string\n\tPort                 string\n\tTimeout              string\n\tUsername             string\n\tPassword             string\n\tPrivateKey           string\n\tPrivateKeyPassphrase string\n\tReuseConnection      string\n\tScript               string\n\tParseType            string\n\tProxyHost            string\n\tProxyPort            string\n\tProxyUsername        string\n\tProxyPassword        string\n\tUseProxy             string\n\tProxyPrivateKey      string\n}\n\ntype SshProtocolConfigOptFunc func(option *SshProtocol)\n\nfunc NewSshProtocol(host, port string, opts ...SshProtocolConfigOptFunc) *SshProtocol {\n\n\toption := &SshProtocol{\n\t\tHost: host,\n\t\tPort: port,\n\t}\n\n\tfor _, opt := range opts {\n\t\topt(option)\n\t}\n\n\treturn &SshProtocol{\n\t\tHost:                 host,\n\t\tPort:                 port,\n\t\tTimeout:              option.Timeout,\n\t\tUsername:             option.Username,\n\t\tPassword:             option.Password,\n\t\tPrivateKey:           option.PrivateKey,\n\t\tPrivateKeyPassphrase: option.PrivateKeyPassphrase,\n\t\tReuseConnection:      option.ReuseConnection,\n\t\tScript:               option.Script,\n\t\tParseType:            option.ParseType,\n\t\tProxyHost:            option.ProxyHost,\n\t\tProxyPort:            option.ProxyPort,\n\t\tProxyUsername:        option.ProxyUsername,\n\t\tProxyPassword:        option.ProxyPassword,\n\t\tUseProxy:             option.UseProxy,\n\t\tProxyPrivateKey:      option.ProxyPrivateKey,\n\t}\n}\n\nfunc (sp *SshProtocol) IsInvalid() error {\n\n\treturn nil\n}\n"})}),"\n",(0,o.jsx)(e.h4,{id:"17-\u5b57\u7b26\u4e32\u62fc\u63a5",children:"17. \u5b57\u7b26\u4e32\u62fc\u63a5"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-golang",children:'// \u8fde\u63a5\u5c11\u91cf\u5b57\u7b26\u65f6\u4f7f\u7528 + \nkey := "projectid: " + p\n\n// \u6784\u5efa\u5e26\u6709\u683c\u5f0f\u5316\u7684\u590d\u6742\u5b57\u7b26\u4e32\u65f6\uff0c\u4f18\u5148\u4f7f\u7528 fmt.Sprintf\nstr := fmt.Sprintf("%s [%s:%d]-> %s", src, qos, mtu, dst)\n\n// \u5b57\u7b26\u4e32\u683c\u5f0f\u66f4\u52a0\u590d\u6742\u65f6\uff0c\u4f18\u5148\u4f7f\u7528 text/template \u6216 safehtml/template\n'})})]})}function g(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(d,{...n})}):d(n)}},89999:(n,e,r)=>{r.d(e,{R:()=>s,x:()=>l});var t=r(58101);const o={},i=t.createContext(o);function s(n){const e=t.useContext(i);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:s(n.components),t.createElement(i.Provider,{value:e},n.children)}},79219:n=>{n.exports=JSON.parse('{"permalink":"/blog/go-style","editUrl":"https://github.com/yuluo-yx/blog/edit/master/blog/java-and-go/go-style.md","source":"@site/blog/java-and-go/go-style.md","title":"go style","description":"\u4e2a\u4eba\u6574\u7406\u7684\u4e00\u4e9b\u4e1c\u897f style\uff0c\u4f5c\u4e3a\u53c2\u8003\u3002","date":"2025-09-07T22:11:49.000Z","tags":[{"inline":true,"label":"golang","permalink":"/blog/tags/golang"}],"readingTime":4.943333333333333,"hasTruncateMarker":true,"authors":[{"name":"\u7267\u751f","title":"Java & go developer","url":"https://github.com/yuluo-yx","email":"yuluo08290126@gmail.com","socials":{"x":"https://x.com/yuluo","github":"https://github.com/yuluo-yx"},"imageURL":"https://kuizuo.cn/img/logo.png","key":"yuluo","page":null}],"frontMatter":{"slug":"go-style","title":"go style","date":"2025-09-07T22:11:49.000Z","authors":"yuluo","tags":["golang"],"keywords":["golang"]},"unlisted":false,"nextItem":{"title":"\u4f18\u96c5\u5173\u95ed GoRoutine","permalink":"/blog/goroutine-close"}}')}}]);