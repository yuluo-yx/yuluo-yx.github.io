"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[216],{3749:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>r,contentTitle:()=>o,default:()=>d,frontMatter:()=>t,metadata:()=>l,toc:()=>c});var l=s(50949),i=s(25105),a=s(89999);const t={slug:"shenyu-init",title:"Apache Shenyu \u672c\u5730\u542f\u52a8\u53ca\u5feb\u901f\u5165\u95e8",date:new Date("2025-07-31T22:41:01.000Z"),authors:"yuluo",tags:["shenyu","gateway"],keywords:["shenyu","gateway"]},o=void 0,r={authorsImageUrls:[void 0]},c=[{value:"1. \u73af\u5883\u51c6\u5907",id:"1-\u73af\u5883\u51c6\u5907",level:2},{value:"1.1 docker-compose.yml",id:"11-docker-composeyml",level:3},{value:"1.2 MySQL \u6570\u636e\u5e93\u914d\u7f6e",id:"12-mysql-\u6570\u636e\u5e93\u914d\u7f6e",level:3},{value:"1.3 SQL \u6587\u4ef6\u914d\u7f6e\uff1a",id:"13-sql-\u6587\u4ef6\u914d\u7f6e",level:3},{value:"2. \u5de5\u5177\u548c\u4ee3\u7801\u4e0b\u8f7d",id:"2-\u5de5\u5177\u548c\u4ee3\u7801\u4e0b\u8f7d",level:2},{value:"3. \u7f16\u8bd1\u53ca\u542f\u52a8",id:"3-\u7f16\u8bd1\u53ca\u542f\u52a8",level:2},{value:"3.1 \u5b89\u88c5\u7f16\u8bd1",id:"31-\u5b89\u88c5\u7f16\u8bd1",level:3},{value:"3.2 \u914d\u7f6e\u4fee\u6539",id:"32-\u914d\u7f6e\u4fee\u6539",level:3},{value:"3.3 \u542f\u52a8",id:"33-\u542f\u52a8",level:3},{value:"3.4 \u8bbf\u95ee Admin \u9875\u9762",id:"34-\u8bbf\u95ee-admin-\u9875\u9762",level:3},{value:"4. Example \u6d4b\u8bd5",id:"4-example-\u6d4b\u8bd5",level:2},{value:"5. \u6d41\u91cf\u5904\u7406",id:"5-\u6d41\u91cf\u5904\u7406",level:2},{value:"\u53c2\u8003\u6587\u6863",id:"\u53c2\u8003\u6587\u6863",level:2}];function h(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Apache ShenYu is a Java native API Gateway for service proxy, protocol conversion and API governance."}),"\n",(0,i.jsx)(n.h2,{id:"1-\u73af\u5883\u51c6\u5907",children:"1. \u73af\u5883\u51c6\u5907"}),"\n",(0,i.jsx)(n.p,{children:"\u672c\u6587\u4e2d\u4f7f\u7528 MySQL \u6765\u4f5c\u4e3a ShenYu \u6570\u636e\u5e93\uff0c\u4f7f\u7528 Docker Compose \u90e8\u7f72 MySQL\u3002"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"\u6216\u8005\u4f7f\u7528\u672c\u5730 MySQL \u6570\u636e\u5e93\u4e5f\u53ef\uff0c\u4f7f\u7528\u672c\u5730\u6570\u636e\u5e93\u65f6\u8df3\u8f6c\u5230 1.3 \u914d\u7f6e\u6570\u636e\u5e93\u8868\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"11-docker-composeyml",children:"1.1 docker-compose.yml"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yml",children:"services:\n  db:\n    image: mysql\n    container_name: mysql\n    restart: always\n    command: --default-authentication-plugin=caching_sha2_password --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci --explicit_defaults_for_timestamp=true --lower_case_table_names=1 --max_allowed_packet=128M;\n    ports:\n      - 3306:3306\n    volumes:\n      - ./data:/var/lib/mysql\n      - ./my.cnf:/etc/my.cnf:ro\n      - ./log:/var/log/mysql\n      - ./initdb.d:/docker-entrypoint-initdb.d\n    environment:\n      MYSQL_ROOT_PASSWORD: toor\n"})}),"\n",(0,i.jsx)(n.h3,{id:"12-mysql-\u6570\u636e\u5e93\u914d\u7f6e",children:"1.2 MySQL \u6570\u636e\u5e93\u914d\u7f6e"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-conf",children:"[mysqld]\n\nskip-host-cache\nskip-name-resolve\ndatadir=/var/lib/mysql\nsocket=/var/lib/mysql/mysql.sock\nsecure-file-priv=/var/lib/mysql-files\nuser=mysql\n\npid-file=/var/run/mysqld/mysqld.pid\n\ntmpdir=/tmp\n"})}),"\n",(0,i.jsx)(n.h3,{id:"13-sql-\u6587\u4ef6\u914d\u7f6e",children:"1.3 SQL \u6587\u4ef6\u914d\u7f6e\uff1a"}),"\n",(0,i.jsxs)(n.p,{children:["SQL \u6570\u636e\u6587\u4ef6\u4e0b\u8f7d\u5730\u5740\uff1a",(0,i.jsx)(n.a,{href:"https://github.com/apache/shenyu/blob/master/db/init/mysql/schema.sql",children:"https://github.com/apache/shenyu/blob/master/db/init/mysql/schema.sql"})]}),"\n",(0,i.jsx)(n.p,{children:"\u5c06\u6570\u636e\u6587\u4ef6\u5728\u540c\u7ea7\u76ee\u5f55\u7684 init.d \u76ee\u5f55\u4e0b\u5e76\u6539\u4e3a init.sql."}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Tips: \u6216\u8005\u4e0d\u81ea\u52a8\u6267\u884c sql \u811a\u672c\uff0c\u542f\u52a8\u4e4b\u540e\u624b\u52a8\u6267\u884c sql \u6587\u4ef6\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"2-\u5de5\u5177\u548c\u4ee3\u7801\u4e0b\u8f7d",children:"2. \u5de5\u5177\u548c\u4ee3\u7801\u4e0b\u8f7d"}),"\n",(0,i.jsx)(n.p,{children:"\u672c\u6587\u4e2d\u4f7f\u7528 IDEA\uff0c\u4ece Github clone \u4ed3\u5e93\u5e76\u4f7f\u7528 IDEA \u6253\u5f00\u3002"}),"\n",(0,i.jsxs)(n.p,{children:["Github\uff1a",(0,i.jsx)(n.a,{href:"https://github.com/apache/shenyu",children:"https://github.com/apache/shenyu"})]}),"\n",(0,i.jsx)(n.h2,{id:"3-\u7f16\u8bd1\u53ca\u542f\u52a8",children:"3. \u7f16\u8bd1\u53ca\u542f\u52a8"}),"\n",(0,i.jsx)(n.h3,{id:"31-\u5b89\u88c5\u7f16\u8bd1",children:"3.1 \u5b89\u88c5\u7f16\u8bd1"}),"\n",(0,i.jsxs)(n.p,{children:["\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u5c06 shenyu \u5b89\u88c5\u5230\u672c\u5730\u7684 mvn \u4ed3\u5e93\uff0c",(0,i.jsx)(n.strong,{children:"\u540e\u9762\u542f\u52a8 example \u65f6\u9700\u8981\u7528\u5230\u3002"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"mvn clean install '-Dmaven.javadoc.skip=true' '-B' '-Drat.skip=true' '-Djacoco.skip=true' '-DskipITs' '-DskipTests'\n"})}),"\n",(0,i.jsx)(n.h3,{id:"32-\u914d\u7f6e\u4fee\u6539",children:"3.2 \u914d\u7f6e\u4fee\u6539"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u5c06 shenyu-admin/src/resource/application.yml#24 \u4e2d\u7684\u6fc0\u6d3b\u914d\u7f6e\u4ece h2 \u6539\u4e3a mysql"}),"\n",(0,i.jsxs)(n.li,{children:["\u5c06 shenyu-admin/src/resource/application-mysql.yml#25 \u4e2d\u7684 MySQL \u5bc6\u7801\u6539\u4e3a 1.1 \u4e2d\u7684 ",(0,i.jsx)(n.code,{children:"toor"})," \u6216\u8005\u4f60\u81ea\u5df1\u7684\u6570\u636e\u5e93\u5bc6\u7801\u3002"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"33-\u542f\u52a8",children:"3.3 \u542f\u52a8"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u542f\u52a8 Admin \u7ba1\u7406\u7aef\uff08\u4f5c\u4e3a\u7f51\u5173\u63a7\u5236\u9762\uff09 org.apache.shenyu.admin.ShenyuAdminBootstrap"}),"\n",(0,i.jsx)(n.li,{children:"\u542f\u52a8 ShenYu \u7f51\u5173\uff08\u4f5c\u4e3a\u7f51\u5173\u6570\u636e\u9762\uff09org.apache.shenyu.bootstrap.ShenyuBootstrapApplication"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"34-\u8bbf\u95ee-admin-\u9875\u9762",children:"3.4 \u8bbf\u95ee Admin \u9875\u9762"}),"\n",(0,i.jsxs)(n.p,{children:["\u6d4f\u89c8\u5668\u8bbf\u95ee ",(0,i.jsx)(n.code,{children:"http://127.0.0.1:9095"}),"\uff0c\u9ed8\u8ba4\u7684\u7528\u6237\u540d\u5bc6\u7801\u4e3a\uff1aadmin/123456\u3002"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"\u5982\u679c\u4e00\u5207\u987a\u5229\uff0c\u4f60\u5c06\u4f1a\u770b\u5230 shenyu \u7f51\u5173\u7684 Admin \u9875\u9762\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"4-example-\u6d4b\u8bd5",children:"4. Example \u6d4b\u8bd5"}),"\n",(0,i.jsx)(n.p,{children:"\u63a5\u4e0b\u6765\u4f7f\u7528 shenyu-examples/shenyu-examples-http \u4f5c\u4e3a\u6d4b\u8bd5\u670d\u52a1\uff0c\u4f7f\u7528 IDEA \u5355\u72ec\u6253\u5f00\u6216\u8005\u4e3a\u5176\u8bbe\u7f6e\u5de5\u4f5c\u76ee\u5f55\u3002"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Tips: \u52a1\u5fc5\u5b8c\u6210 3.1 \u7684\u7f16\u8bd1\u52a8\u4f5c\uff01"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u5b8c\u6210 example \u542f\u52a8\u4e4b\u540e\uff0c\u89c2\u5bdf\u5404\u4e2a\u670d\u52a1\u63a7\u5236\u53f0\uff0c\u4f1a\u770b\u5230\u65e5\u5fd7\u8f93\u51fa\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u7136\u540e\u5728 Admin \u63a7\u5236\u53f0\u53ef\u4ee5\u770b\u5230\u5df2\u7ecf\u6ce8\u518c\u7684\u7684 http \u8def\u7531\uff1a"}),"\n",(0,i.jsx)(n.p,{children:"\u542f\u52a8\u4e4b\u524d\uff1a"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"\u8def\u7531\u672a\u6ce8\u518c",src:s(59650).A+"",width:"2248",height:"833"})}),"\n",(0,i.jsx)(n.p,{children:"\u542f\u52a8\u4e4b\u540e\uff1a"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"\u8def\u7531\u6ce8\u518c\u6210\u529f",src:s(15737).A+"",width:"1278",height:"521"})}),"\n",(0,i.jsx)(n.h2,{id:"5-\u6d41\u91cf\u5904\u7406",children:"5. \u6d41\u91cf\u5904\u7406"}),"\n",(0,i.jsx)(n.p,{children:"\u9996\u5148\u9700\u8981\u660e\u786e\u4e0b\u9762\u4e00\u4e9b\u7ec6\u8282\u95ee\u9898\uff1a"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Shenyu \u7f51\u5173\u6d41\u91cf\u901a\u8fc7\u63d2\u4ef6\u548c\u9009\u62e9\u5668\u4ee5\u53ca\u8def\u7531\u89c4\u5219\u6765\u63a7\u5236\uff1b"}),"\n",(0,i.jsx)(n.li,{children:"\u7f51\u5173\u6d41\u91cf\u5165\u53e3\u5728\uff1aorg.apache.shenyu.web.handler.ShenyuWebHandler.DefaultShenyuPluginChain#execute"}),"\n",(0,i.jsx)(n.li,{children:"\u63d2\u4ef6\u6267\u884c\u94fe\u8def\u5728\uff0c\u5b8c\u6210\u8def\u7531\u89c4\u5219\u7684\u7b5b\u9009\u5e76\u4ea4\u7531\u63d2\u4ef6\u5b9e\u73b0\u6267\u884c\uff1aorg.apache.shenyu.plugin.base.AbstractShenyuPlugin#execute"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u901a\u8fc7\u65ad\u70b9\u5373\u53ef\u770b\u5230\u6267\u884c\u7684\u63d2\u4ef6\u94fe\u4ee5\u53ca\u63d2\u4ef6\u6570\u636e\u4fe1\u606f\u7b49"}),"\n",(0,i.jsx)(n.h2,{id:"\u53c2\u8003\u6587\u6863",children:"\u53c2\u8003\u6587\u6863"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://shenyu.apache.org/zh/docs/deployment/deployment-before",children:"https://shenyu.apache.org/zh/docs/deployment/deployment-before"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://shenyu.apache.org/zh/docs/deployment/deployment-local",children:"https://shenyu.apache.org/zh/docs/deployment/deployment-local"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://shenyu.apache.org/zh/blog/Plugin-SourceCode-Analysis-Divide-Plugin/",children:"https://shenyu.apache.org/zh/blog/Plugin-SourceCode-Analysis-Divide-Plugin/"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/deigmata-paideias/deigmata-paideias/blob/main/docker-compose-tmpl/mysql",children:"https://github.com/deigmata-paideias/deigmata-paideias/blob/main/docker-compose-tmpl/mysql"})}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},15737:(e,n,s)=>{s.d(n,{A:()=>l});const l=s.p+"assets/images/image1-cfac9a8c90a60319e4d9b611b07f0508.png"},59650:(e,n,s)=>{s.d(n,{A:()=>l});const l=s.p+"assets/images/image2-662abba61a59575946fe6eb1fcde1175.png"},89999:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>o});var l=s(58101);const i={},a=l.createContext(i);function t(e){const n=l.useContext(a);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),l.createElement(a.Provider,{value:n},e.children)}},50949:e=>{e.exports=JSON.parse('{"permalink":"/blog/shenyu-init","editUrl":"https://github.com/yuluo-yx/blog/edit/master/blog/shenyu/shenyu-init-and-start.md","source":"@site/blog/shenyu/shenyu-init-and-start.md","title":"Apache Shenyu \u672c\u5730\u542f\u52a8\u53ca\u5feb\u901f\u5165\u95e8","description":"Apache ShenYu is a Java native API Gateway for service proxy, protocol conversion and API governance.","date":"2025-07-31T22:41:01.000Z","tags":[{"inline":true,"label":"shenyu","permalink":"/blog/tags/shenyu"},{"inline":true,"label":"gateway","permalink":"/blog/tags/gateway"}],"readingTime":2.0166666666666666,"hasTruncateMarker":true,"authors":[{"name":"\u7267\u751f","title":"Java & go developer","url":"https://github.com/yuluo-yx","email":"yuluo08290126@gmail.com","socials":{"x":"https://x.com/yuluo","github":"https://github.com/yuluo-yx"},"imageURL":"https://kuizuo.cn/img/logo.png","key":"yuluo","page":null}],"frontMatter":{"slug":"shenyu-init","title":"Apache Shenyu \u672c\u5730\u542f\u52a8\u53ca\u5feb\u901f\u5165\u95e8","date":"2025-07-31T22:41:01.000Z","authors":"yuluo","tags":["shenyu","gateway"],"keywords":["shenyu","gateway"]},"unlisted":false,"prevItem":{"title":"golang context","permalink":"/blog/golang-context"},"nextItem":{"title":"Java & Go SDK \u7ba1\u7406\u5b9e\u8df5","permalink":"/blog/java-and-go-sdk-manager"}}')}}]);